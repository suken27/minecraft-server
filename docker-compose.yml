services:
  mc:
    image: itzg/minecraft-server
    container_name: minecraft-server
    restart: unless-stopped
    tty: true
    stdin_open: true
    ports:
      - "25565:25565"
    environment:
      EULA: "TRUE"
      MEMORY: "14G"
      ENABLE_ROLLING_LOGS: "true"
      TZ: "Europe/Madrid"
      OVERRIDE_SERVER_PROPERTIES: "true"
      MAX_TICK_TIME: "-1"
      ALLOW_FLIGHT: "true"
      LEVEL_TYPE: "biomesoplenty"
      # This sets the type of the modpack platform (CURSEFORGE, MODRINTH, VANILLA)
      MODPACK_PLATFORM: MODRINTH
      MODRINTH_MODPACK: /modpacks/serverpack.mrpack
      RCON_CMDS_STARTUP: |-
        /pregen start gen radius OverworldGeneration CIRCLE 0 0 200
        /pregen start gen radius NetherGeneration CIRCLE 0 0 200 minecraft:the_nether
        /gamerule doFireTick false
      RCON_CMDS_FIRST_CONNECT: |-
        /pregen pause OverworldGeneration
        /pregen pause NetherGeneration
      RCON_CMDS_LAST_DISCONNECT: |-
        /pregen continue OverworldGeneration
        /pregen continue NetherGeneration
    volumes:
      # attach the relative directory 'data' to the container's /data path
      - ./data:/data
      - ./modpacks:/modpacks:ro
